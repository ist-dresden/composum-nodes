var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,a,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");c!=Array.prototype&&c!=Object.prototype&&(c[a]=b.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var a=0;return $jscomp.iteratorPrototype(function(){return a<c.length?{done:!1,value:c[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(c,a){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var b=0,d={next:function(){if(b<c.length){var e=b++;return{value:a(e,c[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(c,a,b,d){if(a){b=$jscomp.global;c=c.split(".");for(d=0;d<c.length-1;d++){var e=c[d];e in b||(b[e]={});b=b[e]}c=c[c.length-1];d=b[c];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(b,c,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.findInternal=function(c,a,b){c instanceof String&&(c=String(c));for(var d=c.length,e=0;e<d;e++){var f=c[e];if(a.call(b,f,e,c))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.values",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(a,b){return b})}},"es6","es3");
$jscomp.checkStringArgs=function(c,a,b){if(null==c)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return c+""};
$jscomp.polyfill("String.prototype.endsWith",function(c){return c?c:function(a,b){var d=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===b&&(b=d.length);for(var c=Math.max(0,Math.min(b|0,d.length)),f=a.length;0<f&&0<c;)if(d[--c]!=a[--f])return!1;return 0>=f}},"es6-impl","es3");
(function(c){c.widgets={"const":{css:{base:"widget",selector:{general:".widget",prefix:".widget.",form:"form.form-widget"}},attr:{name:"name"}},registered:{},register:function(a,b,d){widgets.registered[a]=_.extend({selector:a,widgetClass:b},d)},setUp:function(a){var b=a?$(a):$(document);_.keys(widgets.registered).forEach(function(a){b.find(a).each(function(){core.getView(this,widgets.registered[a].widgetClass)})})},apply:function(a,b){_.keys(widgets.registered).forEach(function(d){d=widgets.registered[d];
var c=d[b];if(_.isFunction(c)){var f=$(a);f.is(d.selector)?c.apply(a):f.find(d.selector).each(function(){c.apply(this)})}})},Widget:Backbone.View.extend({initialize:function(a){this.$input=this.retrieveInput();this.name=this.retrieveName();this.form=this.retrieveForm()},retrieveInput:function(){return this.$el.is("input")?this.$el:this.$("input")},retrieveName:function(){return this.$input.attr(widgets["const"].attr.name)},declareName:function(a){a?this.$input.attr(widgets["const"].attr.name,a):this.$input.removeAttr(widgets["const"].attr.name)},
retrieveForm:function(){var a=this.$el.closest(widgets["const"].css.selector.form);return 0<a.length?a[0].view:void 0},initRules:function(a){this.label=a.data("label");var b=a.data("pattern");b&&(this.rules=_.extend(this.rules||{},{pattern:0===b.indexOf("/")?eval(b):new RegExp(b)}),b=a.data("pattern-hint"))&&(this.rules.patternHint=b);if(a=a.data("rules"))this.rules=_.extend(this.rules||{},{mandatory:a.indexOf(!1),blank:a.indexOf(!1),unique:a.indexOf(!1)})},isValid:function(a){void 0===this.valid&&
(this.valid=_.isFunction(this.validate)?this.validate(a):!0);this.alertFlush(a);return this.valid},validationReset:function(){this.alertMessage=this.valid=void 0},grabFocus:function(){this.$input.focus()},alert:function(a,b,d,c,f){_.isFunction(a)?a(b,d||this.label,c,f):this.alertMessage={type:b,label:d,message:c,hint:f}},alertFlush:function(a){_.isFunction(a)&&this.alertMessage&&(a(this.alertMessage.type,this.alertMessage.label||this.label,this.alertMessage.message,this.alertMessage.hint),this.alertMessage=
void 0)}})};c.widgets.register(".widget.hidden-widget",c.widgets.Widget);c.core={getHtml:function(a,b,d,c){core.ajaxGet(a,{dataType:"html"},b,d,c)},getJson:function(a,b,d,c){core.ajaxGet(a,{dataType:"json"},b,d,c)},ajaxGet:function(a,b,c,e,f){a=_.extend({type:"GET",url:core.getContextUrl(a)},b);core.ajaxCall(a,c,e,f)},ajaxPost:function(a,b,c,e,f,g){a=_.extend({type:"POST",url:core.getContextUrl(a),data:b},c);core.ajaxCall(a,e,f,g)},ajaxPut:function(a,b,c,e,f,g){a=_.extend({type:"PUT",contentType:!1,
url:core.getContextUrl(a),data:b},c);core.ajaxCall(a,e,f,g)},ajaxDelete:function(a,b,c,e,f){a=_.extend({type:"DELETE",contentType:!1,url:core.getContextUrl(a)},b);core.ajaxCall(a,c,e,f)},ajaxCall:function(a,b,c,e){var d=_.extend({async:!0,cache:!1,success:function(a,c,d){_.isFunction(b)&&b(a,c,d)},error:function(d){core.isNotAuthorized(d)&&_.isFunction(core.unauthorizedDelegate)?core.unauthorizedDelegate(function(){core.ajaxCall(a,b,c,e)}):200>d.status||299<d.status?_.isFunction(c)&&c(d):_.isFunction(b)&&
b(d)},complete:function(a){core.isNotAuthorized(a)&&_.isFunction(core.unauthorizedDelegate)||_.isFunction(e)&&e(a)}},a);$.ajax(d)},ajaxPoll:function(a,b,c,e,f){var d=new XMLHttpRequest;d.onload=function(){if(_.isFunction(e)){var a=d.responseText.substring(d.previous_text_length);e(d,a)}};d.onerror=function(){if(_.isFunction(f)){var a=d.responseText.substring(d.previous_text_length);f(d,a)}};d.previous_text_length=0;d.onreadystatechange=function(){if(2<d.readyState){var a=d.responseText.substring(d.previous_text_length);
_.isFunction(c)&&c(d,a);d.previous_text_length=d.responseText.length}};d.open(a,core.getContextUrl(b),!0);d.send()},getRequest:function(a,b,c,e,f){core.ajaxGet(b,{dataType:a},c,e,f)},submitForm:function(a,b,c,e){var d=$(a);d.is("form")||(d=d.find("form"));var g=d.attr("action"),d=new FormData(d[0]);$.ajax({type:"POST",url:core.getContextUrl(g),data:d,cache:!1,contentType:!1,processData:!1,success:function(a){_.isFunction(b)&&b(a)},error:function(d){core.isNotAuthorized(d)&&_.isFunction(core.unauthorizedDelegate)?
core.unauthorizedDelegate(function(){core.submitForm(a,b,c,e)}):200>d.status||299<d.status?_.isFunction(c)&&c(d):_.isFunction(b)&&b(d)},complete:function(a){core.isNotAuthorized(a)&&_.isFunction(core.unauthorizedDelegate)||_.isFunction(e)&&e(a)}})},submitFormPut:function(a,b,c,e,f){var d=$(a);d.is("form")||(d=d.find("form"));var l=d.attr("action");if(!b){b={};for(var d=new FormData(d[0]),m=d.keys(),h;!(h=m.next()).done;){var k=d.getAll(h.value);b[h.value]=1==k.length?k[0]:k}}$.ajax({type:"PUT",url:core.getContextUrl(l),
data:JSON.stringify(b),dataType:"json",cache:!1,contentType:!1,processData:!1,success:function(a){_.isFunction(c)&&c(a)},error:function(d){core.isNotAuthorized(d)&&_.isFunction(core.unauthorizedDelegate)?core.unauthorizedDelegate(function(){core.submitFormPut(a,b,c,e,f)}):200>d.status||299<d.status?_.isFunction(e)&&e(d):_.isFunction(c)&&c(d)},complete:function(a){core.isNotAuthorized(a)&&_.isFunction(core.unauthorizedDelegate)||_.isFunction(f)&&f(a)}})},isNotAuthorized:function(a){return 401==a.status||
403==a.status},resultMessage:function(a,b){var d=/<title>(.+)<\/title>/im.exec(a.responseText);return(b?b+" - ":"")+a.status+": "+a.statusText+(d?"\n\n("+d[1]+")":"")},getContextUrl:function(a){var b=$("html").data("context-path");b&&0!=a.indexOf(b)&&(a=b+a);return a},getView:function(a,b,d,c){return core.getWidget(document,a,b,d,c)},getWidget:function(a,b,c,e,f){if((b="string"===typeof b?$(a).find(b):$(b))&&0<b.length){b=b[0];if(!b.view||f)f={el:b},e&&!_.isFunction(e)&&(f=_.extend(e,f)),b.view=new c(f),
_.isFunction(e)&&e.apply(b.view,[b.view]);return b.view}},widgetOf:function(a,b){a="string"===typeof a?b?b.$(a):$(a):$(a);var c=a.closest(".widget");if(c&&0<c.length)return c[0].view},getWidgetName:function(a){var b;_.isFunction(a.getName)&&(b=a.getName.apply(a));b||(b=a.$el.attr("name"));b||(b=a.$el.data("name"));b||(b=a.$el.find("[name]").attr("name"));return b},getWidgetNames:function(a,b){return core.splitWidgetName(core.getWidgetName(a))},splitWidgetName:function(a,b){b||(b=0<=a.indexOf("/")?
"/":".");return a.split(b)},alert:function(a,b,c,e){var d=core.getView("#alert-dialog",core.components.Dialog);d.$(".modal-header h4").text(b||"Alert");d.show(_.bind(function(){d.alert(a,c,e)},this))},buildContentPath:function(a,b){a&&0<a.length?"/"!=a.charAt(a.length-1)&&(a+="/"):a="/";0==b.indexOf("/")&&(b=b.substring(1));return a+b},getNameFromPath:function(a){var b=a.lastIndexOf("/");return 0<=b?a.substring(b+1):a},getParentPath:function(a){var b=a.lastIndexOf("/");return a.substring(0,0<b?b:
b+1)},encodePath:function(a){a=encodeURI(a);a=a.replace("&","%26");a=a.replace(";","%3B");a=a.replace(":","%3A");return a=a.replace(".","%2E")},isEmptyObject:function(a){for(var b=_.values(a),c=0;c<b.length;c++)if(b[c])return!1;return _.isObject(a)||!a},addPathSegment:function(a,b){b&&(0<a.length&&!a.endsWith("/")&&0!=b.indexOf("/")&&(a+="/"),a+=b,core.endsWith(a,"/")||(a+="/"));return a},endsWith:function(a,b){return a.lastIndexOf(b)==a.length-b.length}}})(window);
