<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>LazyCreationServiceImpl (Composum Nodes 4.3.5 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../jquery/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="LazyCreationServiceImpl (Composum Nodes 4.3.5 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LazyCreationServiceImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.composum.sling.core.concurrent</a></div>
<h2 title="Class LazyCreationServiceImpl" class="title">Class LazyCreationServiceImpl</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.composum.sling.core.concurrent.LazyCreationServiceImpl</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="LazyCreationService.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">LazyCreationServiceImpl</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>
implements <a href="LazyCreationService.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService</a></pre>
<div class="block">Implementation of the <a href="LazyCreationService.html" title="interface in com.composum.sling.core.concurrent"><code>LazyCreationService</code></a>. Uses <a href="SequencerService.html" title="interface in com.composum.sling.core.concurrent"><code>SequencerService</code></a> to
 at least locally avoid conflicts by locking the parent of the created resource. If two nodes of a cluster
 try to create the same resource, anyway, one of the transactions is rolled back. It will just be logged and
 ignored.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="LazyCreationServiceImpl.Configuration.html" title="annotation in com.composum.sling.core.concurrent">LazyCreationServiceImpl.Configuration</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="nested.classes.inherited.from.class.com.composum.sling.core.concurrent.LazyCreationService">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;com.composum.sling.core.concurrent.<a href="LazyCreationService.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService</a></h3>
<code><a href="LazyCreationService.CreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.CreationStrategy</a>, <a href="LazyCreationService.InitializationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.InitializationStrategy</a>, <a href="LazyCreationService.ParentCreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.ParentCreationStrategy</a>, <a href="LazyCreationService.RetrievalStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.RetrievalStrategy</a>&lt;<a href="LazyCreationService.RetrievalStrategy.html" title="type parameter in LazyCreationService.RetrievalStrategy">T</a>&gt;</code></li>
</ul>
</li>
</ul>
</section>
<!-- =========== FIELD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="LazyCreationServiceImpl.Configuration.html" title="annotation in com.composum.sling.core.concurrent">LazyCreationServiceImpl.Configuration</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#config">config</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected org.apache.sling.api.resource.ResourceResolverFactory</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resolverFactory">resolverFactory</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="SequencerService.html" title="interface in com.composum.sling.core.concurrent">SequencerService</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sequencer">sequencer</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="fields.inherited.from.class.com.composum.sling.core.concurrent.LazyCreationService">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;com.composum.sling.core.concurrent.<a href="LazyCreationService.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService</a></h3>
<code><a href="LazyCreationService.html#IDENTITY_RETRIEVER">IDENTITY_RETRIEVER</a></code></li>
</ul>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">LazyCreationServiceImpl</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#activate(com.composum.sling.core.concurrent.LazyCreationServiceImpl.Configuration)">activate</a></span>&#8203;(<a href="LazyCreationServiceImpl.Configuration.html" title="annotation in com.composum.sling.core.concurrent">LazyCreationServiceImpl.Configuration</a>&nbsp;config)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected org.apache.sling.api.resource.ResourceResolver</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createAdministrativeResolver()">createAdministrativeResolver</a></span>()</code></th>
<td class="colLast">
<div class="block">Make administrative resolver with the necessary permissions to create stuff.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected org.apache.sling.api.resource.Resource</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createUninitializedResource(org.apache.sling.api.resource.ResourceResolver,org.apache.sling.api.resource.Resource,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy)">createUninitializedResource</a></span>&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;adminResolver,
                           org.apache.sling.api.resource.Resource&nbsp;parentResource,
                           <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path,
                           <a href="LazyCreationService.CreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.CreationStrategy</a>&nbsp;creator)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deactivate()">deactivate</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected @NotNull <a href="LazyCreationServiceImpl.Configuration.html" title="annotation in com.composum.sling.core.concurrent">LazyCreationServiceImpl.Configuration</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getConfiguration()">getConfiguration</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;T</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.InitializationStrategy,com.composum.sling.core.concurrent.LazyCreationService.ParentCreationStrategy)">getOrCreate</a></span>&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;resolver,
           <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path,
           <a href="LazyCreationService.RetrievalStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.RetrievalStrategy</a>&lt;T&gt;&nbsp;getter,
           <a href="LazyCreationService.CreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.CreationStrategy</a>&nbsp;creator,
           <a href="LazyCreationService.InitializationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.InitializationStrategy</a>&nbsp;initializer,
           <a href="LazyCreationService.ParentCreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.ParentCreationStrategy</a>&nbsp;parentCreationStrategy)</code></th>
<td class="colLast">
<div class="block">Retrieves a resource or applies a creation and initialization strategy to be carried out with an admin resolver
 to create it, for resource intensive initialization processes that should not performed twice in the cluster.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;T</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.InitializationStrategy,java.util.Map)">getOrCreate</a></span>&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;resolver,
           <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path,
           <a href="LazyCreationService.RetrievalStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.RetrievalStrategy</a>&lt;T&gt;&nbsp;getter,
           <a href="LazyCreationService.CreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.CreationStrategy</a>&nbsp;creator,
           <a href="LazyCreationService.InitializationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.InitializationStrategy</a>&nbsp;initializer,
           <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>,&#8203;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>&gt;&nbsp;parentProperties)</code></th>
<td class="colLast">
<div class="block">Retrieves a resource or applies a creation and initialization strategy to be carried out with an admin resolver
 to create it, for resource intensive initialization processes that should not performed twice in the cluster.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;T</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.ParentCreationStrategy)">getOrCreate</a></span>&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;resolver,
           <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path,
           <a href="LazyCreationService.RetrievalStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.RetrievalStrategy</a>&lt;T&gt;&nbsp;getter,
           <a href="LazyCreationService.CreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.CreationStrategy</a>&nbsp;creator,
           <a href="LazyCreationService.ParentCreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.ParentCreationStrategy</a>&nbsp;parentCreationStrategy)</code></th>
<td class="colLast">
<div class="block">Retrieves a resource or applies a creation strategy to be carried out with an admin resolver to create it.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;T</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,java.util.Map)">getOrCreate</a></span>&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;resolver,
           <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path,
           <a href="LazyCreationService.RetrievalStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.RetrievalStrategy</a>&lt;T&gt;&nbsp;getter,
           <a href="LazyCreationService.CreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.CreationStrategy</a>&nbsp;creator,
           <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>,&#8203;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>&gt;&nbsp;parentProperties)</code></th>
<td class="colLast">
<div class="block">Retrieves a resource or applies a creation strategy to be carried out with an admin resolver to create it.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#initializeResource(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.InitializationStrategy,javax.jcr.lock.LockManager)">initializeResource</a></span>&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;adminResolver,
                  <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path,
                  <a href="LazyCreationService.InitializationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.InitializationStrategy</a>&nbsp;initializer,
                  javax.jcr.lock.LockManager&nbsp;lockManager)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isInitialized(org.apache.sling.api.resource.Resource)">isInitialized</a></span>&#8203;(org.apache.sling.api.resource.Resource&nbsp;resource)</code></th>
<td class="colLast">
<div class="block">For resources created by <a href="LazyCreationService.html#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.InitializationStrategy,com.composum.sling.core.concurrent.LazyCreationService.ParentCreationStrategy)"><code>LazyCreationService.getOrCreate(ResourceResolver, String, RetrievalStrategy, CreationStrategy,
 InitializationStrategy, ParentCreationStrategy)</code></a> or <a href="LazyCreationService.html#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.InitializationStrategy,java.util.Map)"><code>LazyCreationService.getOrCreate(ResourceResolver, String,
 RetrievalStrategy, CreationStrategy, InitializationStrategy, Map)</code></a>, this returns true when the initialization
 process is finished.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#refreshSession(org.apache.sling.api.resource.ResourceResolver,boolean)">refreshSession</a></span>&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;resolver,
              boolean&nbsp;keepChanges)</code></th>
<td class="colLast">
<div class="block">Resets unmodified resources to the currently saved state.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resourceIsInitialized(org.apache.sling.api.resource.ResourceResolver,java.lang.String)">resourceIsInitialized</a></span>&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;resolver,
                     <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>protected org.apache.sling.api.resource.Resource</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#safeCreateParent(org.apache.sling.api.resource.ResourceResolver,java.lang.String,int,com.composum.sling.core.concurrent.LazyCreationService.ParentCreationStrategy)">safeCreateParent</a></span>&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;adminResolver,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path,
                int&nbsp;level,
                <a href="LazyCreationService.ParentCreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.ParentCreationStrategy</a>&nbsp;parentCreationStrategy)</code></th>
<td class="colLast">
<div class="block">Tries to create the parent while catching exceptions that could be triggered by someone having created it in
 parallel in the meantime.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>protected javax.jcr.lock.Lock</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#tryToLockResource(java.lang.String,org.apache.sling.api.resource.ResourceResolver)">tryToLockResource</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path,
                 org.apache.sling.api.resource.ResourceResolver&nbsp;adminResolver)</code></th>
<td class="colLast">
<div class="block">If it is not initialized, try to lock it for up to <a href="LazyCreationServiceImpl.Configuration.html#lazycreation_maximumlockwait()"><code>LazyCreationServiceImpl.Configuration.lazycreation_maximumlockwait()</code></a>.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>org.apache.sling.api.resource.Resource</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#waitForInitialization(org.apache.sling.api.resource.ResourceResolver,java.lang.String)">waitForInitialization</a></span>&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;resolver,
                     <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path)</code></th>
<td class="colLast">
<div class="block">For resources created by <a href="LazyCreationService.html#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.InitializationStrategy,com.composum.sling.core.concurrent.LazyCreationService.ParentCreationStrategy)"><code>LazyCreationService.getOrCreate(ResourceResolver, String, RetrievalStrategy, CreationStrategy,
 InitializationStrategy, ParentCreationStrategy)</code></a> or <a href="LazyCreationService.html#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.InitializationStrategy,java.util.Map)"><code>LazyCreationService.getOrCreate(ResourceResolver, String,
 RetrievalStrategy, CreationStrategy, InitializationStrategy, Map)</code></a>, this returns the resource when the
 initialization process is finished.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="resolverFactory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resolverFactory</h4>
<pre>protected&nbsp;org.apache.sling.api.resource.ResourceResolverFactory resolverFactory</pre>
</li>
</ul>
<a id="sequencer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sequencer</h4>
<pre>protected&nbsp;<a href="SequencerService.html" title="interface in com.composum.sling.core.concurrent">SequencerService</a> sequencer</pre>
</li>
</ul>
<a id="config">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>config</h4>
<pre>protected volatile&nbsp;<a href="LazyCreationServiceImpl.Configuration.html" title="annotation in com.composum.sling.core.concurrent">LazyCreationServiceImpl.Configuration</a> config</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LazyCreationServiceImpl</h4>
<pre>public&nbsp;LazyCreationServiceImpl()</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOrCreate</h4>
<pre class="methodSignature">public&nbsp;&lt;T&gt;&nbsp;T&nbsp;getOrCreate&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;resolver,
                         <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path,
                         <a href="LazyCreationService.RetrievalStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.RetrievalStrategy</a>&lt;T&gt;&nbsp;getter,
                         <a href="LazyCreationService.CreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.CreationStrategy</a>&nbsp;creator,
                         <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>,&#8203;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>&gt;&nbsp;parentProperties)
                  throws javax.jcr.RepositoryException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="LazyCreationService.html#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,java.util.Map)">LazyCreationService</a></code></span></div>
<div class="block">Retrieves a resource or applies a creation strategy to be carried out with an admin resolver to create it.
 <p>
 It is an error if getter still returns null after creator is executed.
 </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="LazyCreationService.html#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,java.util.Map)">getOrCreate</a></code>&nbsp;in interface&nbsp;<code><a href="LazyCreationService.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService</a></code></dd>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type the <a href="LazyCreationService.RetrievalStrategy.html" title="interface in com.composum.sling.core.concurrent"><code>LazyCreationService.RetrievalStrategy</code></a> returns.</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - the users resolver. If the resource needed to be created, that is getter returns null, we
                         create it and call a <code>Session.refresh(boolean)</code>(true) on this session
                         before we call getter again. Passed as a parameter to getter.</dd>
<dd><code>path</code> - the absolute path at which the creator creates the resource. Passed as a parameter to
                         getter and creator.</dd>
<dd><code>getter</code> - side effect free function to retrieve the resource. This can be executed several times in
                         this process.</dd>
<dd><code>creator</code> - a strategy to create the resource. Only called when the resource doesn't exist. Is only
                         called after the parent of path is created.</dd>
<dd><code>parentProperties</code> - properties with which non-existing parents of path are created (<code>ResourceResolver.create(Resource, String, Map)</code>).</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the object.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.jcr.RepositoryException</code></dd>
</dl>
</li>
</ul>
<a id="getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.InitializationStrategy,java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOrCreate</h4>
<pre class="methodSignature">public&nbsp;&lt;T&gt;&nbsp;T&nbsp;getOrCreate&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;resolver,
                         <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path,
                         <a href="LazyCreationService.RetrievalStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.RetrievalStrategy</a>&lt;T&gt;&nbsp;getter,
                         <a href="LazyCreationService.CreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.CreationStrategy</a>&nbsp;creator,
                         <a href="LazyCreationService.InitializationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.InitializationStrategy</a>&nbsp;initializer,
                         <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>,&#8203;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>&gt;&nbsp;parentProperties)
                  throws javax.jcr.RepositoryException,
                         org.apache.sling.api.resource.PersistenceException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="LazyCreationService.html#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.InitializationStrategy,java.util.Map)">LazyCreationService</a></code></span></div>
<div class="block">Retrieves a resource or applies a creation and initialization strategy to be carried out with an admin resolver
 to create it, for resource intensive initialization processes that should not performed twice in the cluster. The
 resource is locked for the cluster with <code>LockManager</code> during that time. <p> It is an error
 if getter still returns null after creator is executed. </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="LazyCreationService.html#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.InitializationStrategy,java.util.Map)">getOrCreate</a></code>&nbsp;in interface&nbsp;<code><a href="LazyCreationService.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService</a></code></dd>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type the <a href="LazyCreationService.RetrievalStrategy.html" title="interface in com.composum.sling.core.concurrent"><code>LazyCreationService.RetrievalStrategy</code></a> returns.</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - the users resolver. If the resource needed to be created, that is getter returns null, we
                         create it and call a <code>Session.refresh(boolean)</code>(true) on this session
                         before we call getter again. Passed as a parameter to getter.</dd>
<dd><code>path</code> - the absolute path at which the creator creates the resource. Passed as a parameter to
                         getter and creator.</dd>
<dd><code>getter</code> - side effect free function to retrieve the resource. This can be executed several times in
                         this process.</dd>
<dd><code>creator</code> - a strategy to create the resource. Only called when the resource doesn't exist. Is only
                         called after the parent of path is created. This should not perform any resource
                         intensive actions - these should be done in initializer.</dd>
<dd><code>initializer</code> - the resource intensive part of the resource creation</dd>
<dd><code>parentProperties</code> - properties with which non-existing parents of path are created (<code>ResourceResolver.create(Resource, String, Map)</code>).</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the object.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.jcr.RepositoryException</code></dd>
<dd><code>org.apache.sling.api.resource.PersistenceException</code></dd>
</dl>
</li>
</ul>
<a id="getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.ParentCreationStrategy)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOrCreate</h4>
<pre class="methodSignature">public&nbsp;&lt;T&gt;&nbsp;T&nbsp;getOrCreate&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;resolver,
                         <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path,
                         <a href="LazyCreationService.RetrievalStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.RetrievalStrategy</a>&lt;T&gt;&nbsp;getter,
                         <a href="LazyCreationService.CreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.CreationStrategy</a>&nbsp;creator,
                         <a href="LazyCreationService.ParentCreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.ParentCreationStrategy</a>&nbsp;parentCreationStrategy)
                  throws javax.jcr.RepositoryException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="LazyCreationService.html#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.ParentCreationStrategy)">LazyCreationService</a></code></span></div>
<div class="block">Retrieves a resource or applies a creation strategy to be carried out with an admin resolver to create it.
 <p>
 It is an error if getter still returns null after creator is executed.
 </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="LazyCreationService.html#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.ParentCreationStrategy)">getOrCreate</a></code>&nbsp;in interface&nbsp;<code><a href="LazyCreationService.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService</a></code></dd>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type the <a href="LazyCreationService.RetrievalStrategy.html" title="interface in com.composum.sling.core.concurrent"><code>LazyCreationService.RetrievalStrategy</code></a> returns.</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - the users resolver. If the resource needed to be created, that is getter returns
                               null, we create it and call a <code>Session.refresh(boolean)</code>(true) on
                               this session before we call getter again. Passed as a parameter to getter.</dd>
<dd><code>path</code> - the absolute path at which the creator creates the resource. Passed as a parameter
                               to getter and creator.</dd>
<dd><code>getter</code> - side effect free function to retrieve the resource. This can be executed several
                               times in this process.</dd>
<dd><code>creator</code> - a strategy to create the resource. Only called when the resource doesn't exist. Is
                               only called after the parent of path is created.</dd>
<dd><code>parentCreationStrategy</code> - strategy with which non-existing parents of path are created.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the object.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.jcr.RepositoryException</code></dd>
</dl>
</li>
</ul>
<a id="getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.InitializationStrategy,com.composum.sling.core.concurrent.LazyCreationService.ParentCreationStrategy)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOrCreate</h4>
<pre class="methodSignature">public&nbsp;&lt;T&gt;&nbsp;T&nbsp;getOrCreate&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;resolver,
                         <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path,
                         <a href="LazyCreationService.RetrievalStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.RetrievalStrategy</a>&lt;T&gt;&nbsp;getter,
                         <a href="LazyCreationService.CreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.CreationStrategy</a>&nbsp;creator,
                         <a href="LazyCreationService.InitializationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.InitializationStrategy</a>&nbsp;initializer,
                         <a href="LazyCreationService.ParentCreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.ParentCreationStrategy</a>&nbsp;parentCreationStrategy)
                  throws javax.jcr.RepositoryException,
                         org.apache.sling.api.resource.PersistenceException</pre>
<div class="block">Retrieves a resource or applies a creation and initialization strategy to be carried out with an admin resolver
 to create it, for resource intensive initialization processes that should not performed twice in the cluster. The
 resource is locked for the cluster with <code>LockManager</code> during that time.
 <p>
 <p>
 It is an error if getter still returns null after creator is executed.
 </p>
 <p>We create the item in two steps. First, it is created and JCR-locked. Then it is initialized and JCR-unlocked.
 So, when trying to retrieve the item, we check that it is not locked, too, to verify that it is not in
 construction. The resource is assumed fully initialized if it exists and is not locked. We put the current time
 into lastupdatetime to keep track how long it is locked and whether the lock must be broken. Since we can only
 lock the item after the creation is committed, we set jcr:lastModified only after locking and check this must be
 set when retrieving the item.
 <p>
 If the item exists but is locked, we wait until it is unlocked and then return what's there. If we exceed the
 <a href="LazyCreationServiceImpl.Configuration.html#lazycreation_maximumlockwait()"><code>LazyCreationServiceImpl.Configuration.lazycreation_maximumlockwait()</code></a> when waiting for the lock, we break the lock and create it ourselves.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="LazyCreationService.html#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.InitializationStrategy,com.composum.sling.core.concurrent.LazyCreationService.ParentCreationStrategy)">getOrCreate</a></code>&nbsp;in interface&nbsp;<code><a href="LazyCreationService.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService</a></code></dd>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type the <a href="LazyCreationService.RetrievalStrategy.html" title="interface in com.composum.sling.core.concurrent"><code>LazyCreationService.RetrievalStrategy</code></a> returns.</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resolver</code> - the users resolver. If the resource needed to be created, that is getter returns
                               null, we create it and call a <code>Session.refresh(boolean)</code>(true) on
                               this session before we call getter again. Passed as a parameter to getter.</dd>
<dd><code>path</code> - the absolute path at which the creator creates the resource. Passed as a parameter
                               to getter and creator.</dd>
<dd><code>getter</code> - side effect free function to retrieve the resource. This can be executed several
                               times in this process.</dd>
<dd><code>creator</code> - a strategy to create the resource. Only called when the resource doesn't exist. Is
                               only called after the parent of path is created.</dd>
<dd><code>initializer</code> - the resource intensive part of the resource creation</dd>
<dd><code>parentCreationStrategy</code> - strategy with which non-existing parents of path are created.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the object.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.jcr.RepositoryException</code></dd>
<dd><code>org.apache.sling.api.resource.PersistenceException</code></dd>
</dl>
</li>
</ul>
<a id="createUninitializedResource(org.apache.sling.api.resource.ResourceResolver,org.apache.sling.api.resource.Resource,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createUninitializedResource</h4>
<pre class="methodSignature">protected&nbsp;org.apache.sling.api.resource.Resource&nbsp;createUninitializedResource&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;adminResolver,
                                                                             org.apache.sling.api.resource.Resource&nbsp;parentResource,
                                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path,
                                                                             <a href="LazyCreationService.CreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.CreationStrategy</a>&nbsp;creator)</pre>
</li>
</ul>
<a id="tryToLockResource(java.lang.String,org.apache.sling.api.resource.ResourceResolver)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryToLockResource</h4>
<pre class="methodSignature">protected&nbsp;javax.jcr.lock.Lock&nbsp;tryToLockResource&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path,
                                                org.apache.sling.api.resource.ResourceResolver&nbsp;adminResolver)
                                         throws javax.jcr.RepositoryException,
                                                org.apache.sling.api.resource.PersistenceException</pre>
<div class="block">If it is not initialized, try to lock it for up to <a href="LazyCreationServiceImpl.Configuration.html#lazycreation_maximumlockwait()"><code>LazyCreationServiceImpl.Configuration.lazycreation_maximumlockwait()</code></a>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the lock it is locked, null if it is already initialized by someone else</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.jcr.lock.LockException</code> - if we couldn't get a lock</dd>
<dd><code>javax.jcr.RepositoryException</code></dd>
<dd><code>org.apache.sling.api.resource.PersistenceException</code></dd>
</dl>
</li>
</ul>
<a id="initializeResource(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.InitializationStrategy,javax.jcr.lock.LockManager)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initializeResource</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;initializeResource&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;adminResolver,
                                  <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path,
                                  <a href="LazyCreationService.InitializationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.InitializationStrategy</a>&nbsp;initializer,
                                  javax.jcr.lock.LockManager&nbsp;lockManager)</pre>
</li>
</ul>
<a id="resourceIsInitialized(org.apache.sling.api.resource.ResourceResolver,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resourceIsInitialized</h4>
<pre class="methodSignature">protected&nbsp;boolean&nbsp;resourceIsInitialized&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;resolver,
                                        <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path)
                                 throws javax.jcr.RepositoryException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.jcr.RepositoryException</code></dd>
</dl>
</li>
</ul>
<a id="isInitialized(org.apache.sling.api.resource.Resource)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isInitialized</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isInitialized&#8203;(org.apache.sling.api.resource.Resource&nbsp;resource)
                      throws javax.jcr.RepositoryException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="LazyCreationService.html#isInitialized(org.apache.sling.api.resource.Resource)">LazyCreationService</a></code></span></div>
<div class="block">For resources created by <a href="LazyCreationService.html#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.InitializationStrategy,com.composum.sling.core.concurrent.LazyCreationService.ParentCreationStrategy)"><code>LazyCreationService.getOrCreate(ResourceResolver, String, RetrievalStrategy, CreationStrategy,
 InitializationStrategy, ParentCreationStrategy)</code></a> or <a href="LazyCreationService.html#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.InitializationStrategy,java.util.Map)"><code>LazyCreationService.getOrCreate(ResourceResolver, String,
 RetrievalStrategy, CreationStrategy, InitializationStrategy, Map)</code></a>, this returns true when the initialization
 process is finished.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="LazyCreationService.html#isInitialized(org.apache.sling.api.resource.Resource)">isInitialized</a></code>&nbsp;in interface&nbsp;<code><a href="LazyCreationService.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.jcr.RepositoryException</code></dd>
</dl>
</li>
</ul>
<a id="waitForInitialization(org.apache.sling.api.resource.ResourceResolver,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitForInitialization</h4>
<pre class="methodSignature">public&nbsp;org.apache.sling.api.resource.Resource&nbsp;waitForInitialization&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;resolver,
                                                                    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path)
                                                             throws javax.jcr.RepositoryException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="LazyCreationService.html#waitForInitialization(org.apache.sling.api.resource.ResourceResolver,java.lang.String)">LazyCreationService</a></code></span></div>
<div class="block">For resources created by <a href="LazyCreationService.html#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.InitializationStrategy,com.composum.sling.core.concurrent.LazyCreationService.ParentCreationStrategy)"><code>LazyCreationService.getOrCreate(ResourceResolver, String, RetrievalStrategy, CreationStrategy,
 InitializationStrategy, ParentCreationStrategy)</code></a> or <a href="LazyCreationService.html#getOrCreate(org.apache.sling.api.resource.ResourceResolver,java.lang.String,com.composum.sling.core.concurrent.LazyCreationService.RetrievalStrategy,com.composum.sling.core.concurrent.LazyCreationService.CreationStrategy,com.composum.sling.core.concurrent.LazyCreationService.InitializationStrategy,java.util.Map)"><code>LazyCreationService.getOrCreate(ResourceResolver, String,
 RetrievalStrategy, CreationStrategy, InitializationStrategy, Map)</code></a>, this returns the resource when the
 initialization process is finished. If the resource is in creation, this waits a while.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="LazyCreationService.html#waitForInitialization(org.apache.sling.api.resource.ResourceResolver,java.lang.String)">waitForInitialization</a></code>&nbsp;in interface&nbsp;<code><a href="LazyCreationService.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the initialized resource, or null if we couldn't find it or it took too long.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.jcr.RepositoryException</code></dd>
</dl>
</li>
</ul>
<a id="safeCreateParent(org.apache.sling.api.resource.ResourceResolver,java.lang.String,int,com.composum.sling.core.concurrent.LazyCreationService.ParentCreationStrategy)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>safeCreateParent</h4>
<pre class="methodSignature">protected&nbsp;org.apache.sling.api.resource.Resource&nbsp;safeCreateParent&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;adminResolver,
                                                                  <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;path,
                                                                  int&nbsp;level,
                                                                  <a href="LazyCreationService.ParentCreationStrategy.html" title="interface in com.composum.sling.core.concurrent">LazyCreationService.ParentCreationStrategy</a>&nbsp;parentCreationStrategy)
                                                           throws javax.jcr.RepositoryException</pre>
<div class="block">Tries to create the parent while catching exceptions that could be triggered by someone having created it in
 parallel in the meantime. Includes commit and locks path on this node.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.jcr.RepositoryException</code></dd>
</dl>
</li>
</ul>
<a id="refreshSession(org.apache.sling.api.resource.ResourceResolver,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refreshSession</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;refreshSession&#8203;(org.apache.sling.api.resource.ResourceResolver&nbsp;resolver,
                              boolean&nbsp;keepChanges)</pre>
<div class="block">Resets unmodified resources to the currently saved state.</div>
</li>
</ul>
<a id="createAdministrativeResolver()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createAdministrativeResolver</h4>
<pre class="methodSignature">protected&nbsp;org.apache.sling.api.resource.ResourceResolver&nbsp;createAdministrativeResolver()</pre>
<div class="block">Make administrative resolver with the necessary permissions to create stuff. Remember to close it!</div>
</li>
</ul>
<a id="activate(com.composum.sling.core.concurrent.LazyCreationServiceImpl.Configuration)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>activate</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;activate&#8203;(<a href="LazyCreationServiceImpl.Configuration.html" title="annotation in com.composum.sling.core.concurrent">LazyCreationServiceImpl.Configuration</a>&nbsp;config)</pre>
</li>
</ul>
<a id="deactivate()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deactivate</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;deactivate()</pre>
</li>
</ul>
<a id="getConfiguration()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getConfiguration</h4>
<pre class="methodSignature">@NotNull
protected&nbsp;@NotNull <a href="LazyCreationServiceImpl.Configuration.html" title="annotation in com.composum.sling.core.concurrent">LazyCreationServiceImpl.Configuration</a>&nbsp;getConfiguration()</pre>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LazyCreationServiceImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2025. All rights reserved.</small></p>
</footer>
</body>
</html>
